

<!DOCTYPE html>
<html class="writer-html5" lang="ca" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tornar enrere &mdash; Introducció a la programació amb Java 2021-22 documentació</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/moistyle.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="author" title="Quant a aquests documents" href="about.html" />
    <link rel="index" title="Índex" href="genindex.html" />
    <link rel="search" title="Cerca" href="search.html" />
    <link rel="next" title="Branques" href="cvs_git_branch.html" />
    <link rel="prev" title="Reanomenar fitxers" href="cvs_git_mv.html" />
     
    <script class="googleanalytics" src="_static/moiscripts.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Introducció a la programació amb Java
          

          
            
            <img src="_static/logoprg.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                Curs 2021-22
              </div>
            
          

          

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="primeres_passes.html">Primeres passes</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Elements bàsics de la programació</a></li>
<li class="toctree-l1"><a class="reference internal" href="moduls.html">Mòduls</a></li>
<li class="toctree-l1"><a class="reference internal" href="fitxers.html">Fitxers</a></li>
<li class="toctree-l1"><a class="reference internal" href="poo.html">Programació Orientada a Objectes</a></li>
<li class="toctree-l1"><a class="reference internal" href="bib.html">Biblioteques</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="cvs.html">Control de versions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cvs_intro.html">Justificació</a></li>
<li class="toctree-l2"><a class="reference internal" href="cvs_definicio.html">Definició</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="cvs_git.html">Git</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cvs_git_intro.html">Introducció</a></li>
<li class="toctree-l3"><a class="reference internal" href="cvs_git_install.html">Instal·lació i configuració</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="cvs_git_basic.html">Git bàsic</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="cvs_git_help.html">Obtenció d’ajuda</a></li>
<li class="toctree-l4"><a class="reference internal" href="cvs_git_init.html">Creació d’un repositori: <code class="docutils literal notranslate"><span class="pre">init</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="cvs_git_add.html">Afegir fitxers a la gestió: add</a></li>
<li class="toctree-l4"><a class="reference internal" href="cvs_git_status.html">Comprovar l’estat: status</a></li>
<li class="toctree-l4"><a class="reference internal" href="cvs_git_commit.html">Guardar els canvis: commit</a></li>
<li class="toctree-l4"><a class="reference internal" href="cvs_git_stage.html">Passar a <em>stage</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="cvs_git_ignore.html">Ignorar fitxers</a></li>
<li class="toctree-l4"><a class="reference internal" href="cvs_git_log.html">Consultar versions: log</a></li>
<li class="toctree-l4"><a class="reference internal" href="cvs_git_diff.html">Comparar versions</a></li>
<li class="toctree-l4"><a class="reference internal" href="cvs_git_rm.html">Eliminar fitxers</a></li>
<li class="toctree-l4"><a class="reference internal" href="cvs_git_mv.html">Reanomenar fitxers</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Tornar enrere</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cvs_git_branch.html">Branques</a></li>
<li class="toctree-l3"><a class="reference internal" href="cvs_git_bundle.html">Empaquetar un repositori de Git</a></li>
<li class="toctree-l3"><a class="reference internal" href="cvs_git_remot.html">Git remot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="exercici_52_01_cvs.html"> Exercici 52_01. Control de versions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Validació d’aplicacions</a></li>
<li class="toctree-l1"><a class="reference internal" href="bd.html">Persistència amb bases de dades</a></li>
<li class="toctree-l1"><a class="reference internal" href="apendix.html">Apèndix</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Introducció a la programació amb Java</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="cvs.html">Control de versions</a> &raquo;</li>
        
          <li><a href="cvs_git.html">Git</a> &raquo;</li>
        
          <li><a href="cvs_git_basic.html">Git bàsic</a> &raquo;</li>
        
      <li>Tornar enrere</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
    
           <div itemprop="articleBody">
            
  <div class="section" id="tornar-enrere">
<h1>Tornar enrere<a class="headerlink" href="#tornar-enrere" title="Link permanent a aquest títol">¶</a></h1>
<p>Potser la raó fonamental de fer servir un SCV és poder recuperar
fàcilment una versió anterior.</p>
<p>Considera els següents escenaris habituals i la manera de resoldre’ls:</p>
<div class="section" id="modificar-el-missatge-del-darrer-commit">
<h2>Modificar el missatge del darrer <em>commit</em><a class="headerlink" href="#modificar-el-missatge-del-darrer-commit" title="Link permanent a aquest títol">¶</a></h2>
<p>Potser volíem afegir alguna cosa més a la descripció del darrer
<em>commit</em> o bé simplement ens hem equivocat amb el missatge. En
qualsevol cas, podem tornar enrere fàcilment amb l’opció
<code class="docutils literal notranslate"><span class="pre">--amend</span></code> si encara no tenim cap canvi a <em>stage</em>.</p>
<p>Aconsegueix que el teu directori de treball estigui net segons
<code class="docutils literal notranslate"><span class="pre">status</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">projecte$ git status</span>
<span class="gp"># </span>On branch master
<span class="go">nothing to commit (working directory clean)</span>
<span class="go">projecte$ echo &quot;un altre&quot; &gt; adeu.txt</span>
<span class="go">projecte$ git add adeu.txt</span>
<span class="go">projecte$ git commit -am &quot;un missatge equivocat&quot;</span>
<span class="go">[master 6b38844] un missatge equivocat</span>
<span class="go"> 1 file changed, 1 insertion(+)</span>
<span class="go"> create mode 100644 adeu.txt</span>
<span class="gp">$ </span>git commit --amend -m <span class="s2">&quot;missatge correcte&quot;</span>
<span class="go">[master 2c942cc] missatge correcte</span>
<span class="go"> 1 file changed, 1 insertion(+)</span>
<span class="go"> create mode 100644 adeu.txt</span>
<span class="go">projecte$ git log -2</span>
<span class="go">commit 2c942cc4dd691473b1d791d1b82af839d21b4b50</span>
<span class="go">Author: Laia Sànchez d&#39;Argent &lt;lalaionamolonaexample.org&gt;</span>
<span class="go">Date:   Sun Mar 10 13:18:46 2013 +0100</span>

<span class="go">    missatge correcte</span>

<span class="go">commit b4d88eabeb77e1d83ca674199810de0c892c7efa</span>
<span class="go">Author: Laia Sànchez d&#39;Argent &lt;lalaionamolonaexample.org&gt;</span>
<span class="go">Date:   Sun Mar 10 12:15:45 2013 +0100</span>

<span class="go">    afegit adéu en inglish</span>
</pre></div>
</div>
<p>Fixa’t com a l’històric no queda constància del missatge erroni.</p>
</div>
<div class="section" id="afegir-eliminar-continguts-al-darrer-commit">
<h2>Afegir/eliminar continguts al darrer <em>commit</em><a class="headerlink" href="#afegir-eliminar-continguts-al-darrer-commit" title="Link permanent a aquest títol">¶</a></h2>
<p>De vegades fem el <em>commit</em> massa aviat per després adonar-nos que
hem comés un petit error i ens veiem obligats a tornar a fer el
<em>commit</em>. Git ens ofereix un mecanisme senzill tot utilitzant
novament l’opció <code class="docutils literal notranslate"><span class="pre">--amend</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">projecte$ echo &quot;nou adéu&quot; &gt; adeu.txt</span>
<span class="go">projecte$ git status</span>
<span class="gp"># </span>On branch master
<span class="gp"># </span>Changes not staged <span class="k">for</span> commit:
<span class="gp">#   </span><span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>
<span class="gp">#   </span><span class="o">(</span>use <span class="s2">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="k">in</span> working directory<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#     </span>modified:   adeu.txt
<span class="gp">#</span>
<span class="go">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span>
<span class="go">projecte$ git commit --amend -am &quot;missatge correcte amb adeu correcte&quot;</span>
<span class="go">[master ced5a9d] missatge correcte amb adeu correcte</span>
<span class="go"> 1 file changed, 1 insertion(+)</span>
<span class="go"> create mode 100644 adeu.txt</span>
<span class="go">projecte$ git log -2</span>
<span class="go">commit ced5a9d2161b6206c76f2dbe47a77cc113bdc5c4</span>
<span class="go">Author: Laia Sànchez d&#39;Argent &lt;lalaionamolonaexample.org&gt;</span>
<span class="go">Date:   Sun Mar 10 13:18:46 2013 +0100</span>

<span class="go">    missatge correcte amb adeu correcte</span>

<span class="go">commit b4d88eabeb77e1d83ca674199810de0c892c7efa</span>
<span class="go">Author: Laia Sànchez d&#39;Argent &lt;lalaionamolonaexample.org&gt;</span>
<span class="go">Date:   Sun Mar 10 12:15:45 2013 +0100</span>
</pre></div>
</div>
<p>Fixa’t com el contingut del fitxer <code class="docutils literal notranslate"><span class="pre">adeu.txt</span></code> ha canviat però
queda enregistrat en el mateix <em>commit</em> que abans.</p>
</div>
<div class="section" id="recuperar-un-fitxer-segons-el-darrer-commit">
<h2>Recuperar un fitxer segons el darrer <em>commit</em><a class="headerlink" href="#recuperar-un-fitxer-segons-el-darrer-commit" title="Link permanent a aquest títol">¶</a></h2>
<p>Has modificat el contingut d’un fitxer però vols deixar-lo tal i com
estava el darrer cop que vas fer <em>commit</em>? Només has de seguir les
indicacions de <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">projecte$ echo &quot;nou hola&quot; &gt; hola.txt</span>
<span class="go">projecte$ echo &quot;nou adéu&quot; &gt; adeu.txt</span>
<span class="go">projecte$ git add hola.txt</span>
<span class="go">projecte$ git status</span>
<span class="gp"># </span>On branch master
<span class="gp"># </span>Changes to be committed:
<span class="gp">#   </span><span class="o">(</span>use <span class="s2">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#     </span>modified:   hola.txt
<span class="gp">#</span>
<span class="gp"># </span>Changes not staged <span class="k">for</span> commit:
<span class="gp">#   </span><span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>
<span class="gp">#   </span><span class="o">(</span>use <span class="s2">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="k">in</span> working directory<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#     </span>modified:   adeu.txt
<span class="gp">#</span>
</pre></div>
</div>
<p>Fixa’t que tenim en <em>stage</em> a <code class="docutils literal notranslate"><span class="pre">hola.txt</span></code> i com a <em>modificat</em> a
<code class="docutils literal notranslate"><span class="pre">adeu.txt</span></code>. Recuperem tots dos seguint les indicacions de Git</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git reset HEAD hola.txt
<span class="go">Unstaged changes after reset:</span>
<span class="go">M     adeu.txt</span>
<span class="go">M     hola.txt</span>
<span class="go">projecte$ git status</span>
<span class="gp"># </span>On branch master
<span class="gp"># </span>Changes not staged <span class="k">for</span> commit:
<span class="gp">#   </span><span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>
<span class="gp">#   </span><span class="o">(</span>use <span class="s2">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="k">in</span> working directory<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#     </span>modified:   adeu.txt
<span class="gp">#     </span>modified:   hola.txt
<span class="gp">#</span>
<span class="go">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span>
<span class="go">projecte$ git checkout -- hola.txt adeu.txt</span>
<span class="go">projecte$ git status</span>
<span class="gp"># </span>On branch master
<span class="go">nothing to commit (working directory clean)</span>
<span class="go">projecte$ cat hola.txt</span>
<span class="go">hola</span>
<span class="go">adéu</span>
<span class="go">gutbai</span>
<span class="go">projecte$ cat adeu.txt</span>
<span class="go">un altre</span>
</pre></div>
</div>
<p><strong>Atenció</strong>: fes servir aquestes comandes amb compte. Els canvis que
reverteixis d’aquesta manera <strong>no</strong> els podràs recuperar amb Git
donat que no han arribat mai a ser registrats! És preferible que
facis servir l’opció <code class="docutils literal notranslate"><span class="pre">--amend</span></code> perquè aquesta ofereix a Git
possibilitats de <a class="reference external" href="http://git-scm.com/book/en/Git-Internals-Maintenance-and-Data-Recovery">recuperació</a>.</p>
</div>
<div class="section" id="mes-opcions-de-recuperacio">
<h2>Més opcions de recuperació<a class="headerlink" href="#mes-opcions-de-recuperacio" title="Link permanent a aquest títol">¶</a></h2>
<p>Git ens ofereix moltes més opcions per tornar en rere. Per exemple, si ens
interessa tornar dos <em>commits</em> enrere, ho podem fer amb:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git revert HEAD~2..HEAD
</pre></div>
</div>
<p>Troba més informació d’opcions de recuperació per exemple al <a class="reference external" href="https://git-scm.com/book/en/v2/Git-Basics-Undoing-Things">llibre Pro Git</a></p>
<p>Quan et trobis amb una situació concreta en que hagis de recuperar quelcom que
has fet, si no te’n surts amb els exemples anteriors, el més probable és git
ofereixi alguna manera senzilla de fer-ho. El més important és que siguis capaç
de descriure amb precisió què és el que vols i realitzis una cerca. És més que
probable que algú altre s’hi hagi trobat abans i hagi publicat com.</p>
</div>
</div>


           </div>
           
          </div>
    <div class="googleanalytics">
    <div id="cookiesbox">
        Aquest lloc web utilitza galetes (<i>cookies</i>) per a analitzar el seu ús
        amb les eines que ofereix <a href="https://www.google.com/analytics">Google Analytics</a>.
        En continuar navegant-hi, estàs acceptant-ho.
        <br/>
        <a class="btn btn-neutral" onclick="setUserAcceptsCookies();">
            Tancar
            <span class="fa fa-window-close"></span>
        </a>
    </div>
    <script>setCookiesboxVisibility();</script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-41103782-2', 'auto');
      ga('send', 'pageview');
    </script>
</div>


          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cvs_git_branch.html" class="btn btn-neutral float-right" title="Branques" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cvs_git_mv.html" class="btn btn-neutral float-left" title="Reanomenar fitxers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021-2022 Moisès Gómez Girón

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>