#################
Comparar versions
#################

``status`` ens ofereix la informació de quins fitxers han estat
modificats però de vegades ens interessarà saber quins canvis concrets
s'ha realitzat en un fitxer.

Considerem els següents casos:

* què he canviat i encara no he passat a *stage*?

  Segueix les comandes:

.. code-block:: console

    projecte$ echo "ciao" >> hola.txt
    projecte$ git status
    # On branch master
    # Changes not staged for commit:
    #   (use "git add <file>..." to update what will be committed)
    #   (use "git checkout -- <file>..." to discard changes in working directory)
    #
    #	modified:   hola.txt
    #
    no changes added to commit (use "git add" and/or "git commit -a")
    projecte$ git diff hola.txt
    diff --git a/hola.txt b/hola.txt
    index 12a57d6..007493b 100644
    --- a/hola.txt
    +++ b/hola.txt
    @@ -1,3 +1,4 @@
     hola
     adéu
     gutbay
    +ciao

  Fixa't que la utilitat ``diff`` ens mostra les diferencies entre la
  versió *staged* (anomenada ``a/hola.txt``) i l'actual (anomenada
  ``b/hola.txt``) Veiem que la nova conté una línia extra ``ciao``.
  Pots canviar el programa que mostra les diferències per un de més
  visual, per exemple, ``vimdiff`` (revisa les opcions de la comanda
  ``global``).

* quines diferències hi ha entre el que tinc a *stage* i el darrer
  *commit*?

  Si el que ens preocupa és quins són els canvis concrets en un
  fitxers que es registraran en el proper *commit* podem passar
  ``hola.txt`` a *stage* i comprovar les diferències.

.. code-block:: console

    projecte$ git add hola.txt
    projecte$ git diff --staged hola.txt
    diff --git a/hola.txt b/hola.txt
    index 12a57d6..007493b 100644
    --- a/hola.txt
    +++ b/hola.txt
    @@ -1,3 +1,4 @@
     hola
     adéu
     gutbay
    +ciao

* què ha canviat a cada *commit* ?

  Per a respondre aquesta pregunta farem servir la comanda ``-p`` de
  ``log``. La de l'exemple d'acontinuació fa servir ``-2`` per mostrar
  només els dos darrers *commits*.

.. code-block:: console

    projecte$ git log -2 -p hola.txt
    commit b4d88eabeb77e1d83ca674199810de0c892c7efa
    Author: Laia Sànchez d'Argent <lalaionamolonaexample.org>
    Date:   Sun Mar 10 12:15:45 2013 +0100

        Afegit adéu en inglish

    diff --git a/hola.txt b/hola.txt
    index 3ad6909..db1148d 100644
    --- a/hola.txt
    +++ b/hola.txt
    @@ -1,2 +1,3 @@
     hola
     adéu
    +gutbai

    commit 831889ec9bfd31575b56f220c0a2c67c3a07be58
    Author: Laia Sànchez d'Argent <lalaionamolonaexample.org>
    Date:   Sun Mar 10 12:15:19 2013 +0100

        Afegit adéu

    diff --git a/hola.txt b/hola.txt
    index 5c1b149..3ad6909 100644
    --- a/hola.txt
    +++ b/hola.txt
    @@ -1 +1,2 @@
     hola
    +adéu

